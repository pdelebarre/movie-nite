(this["webpackJsonpmovie-nite"]=this["webpackJsonpmovie-nite"]||[]).push([[0],{12:function(e,t,n){e.exports={contain:"MovieList_contain__Q4N4k",row:"MovieList_row__1SWec",row__inner:"MovieList_row__inner__3Isds",tile:"MovieList_tile__1gm7m",sectionname:"MovieList_sectionname__3R2Gd"}},14:function(e,t,n){e.exports={backdrop:"Modal_backdrop__1mfF6",modal:"Modal_modal__4DXUe","slide-down":"Modal_slide-down__W3MdX"}},32:function(e,t,n){},4:function(e,t,n){e.exports={tile:"MovieCard_tile__19OQb",tile__img:"MovieCard_tile__img__3jp87",tile__details:"MovieCard_tile__details__2B8E1",tile__title:"MovieCard_tile__title__vAX6p",tile__more:"MovieCard_tile__more__3TWx7",tile__remove:"MovieCard_tile__remove__1G-sX",tile__watched:"MovieCard_tile__watched__kiBfo",tile__button:"MovieCard_tile__button__1E-Jk"}},53:function(e,t,n){"use strict";n.r(t);var i=n(1),a=n.n(i),c=n(10),o=n.n(c),r=(n(32),n(27)),s=n(17),l=n(2),d=n.n(l),_=n(6),u=n(5),v=n(26),m=n.n(v).a.create({baseURL:"http://localhost:5000/api",headers:{"Content-type":"application/json"}}),j={insertMovie:function(e){return m.post("/movie",e)},getAllMovies:function(){return m.get("/movies")},updateMovieById:function(e,t){return m.put("/movie/".concat(e),t)},deleteMovieById:function(e){return m.delete("/movie/".concat(e))},getMovieById:function(e){return m.get("/movie/".concat(e))},getMovieByTMDBId:function(e){return m.get("/movie/tmdb/".concat(e))}},b=n(9),p=n.n(b),h=n(7),f=n.n(h),O="5dcf7f28a88be0edc01bbbde06f024ab",x=n(0),g=function(e){var t=Object(i.useState)([]),n=Object(u.a)(t,2),a=n[0],c=n[1];Object(i.useEffect)((function(){var t=setTimeout(Object(_.a)(d.a.mark((function t(){var n,i,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("in dropdown, query = ",e.query),n="https://api.themoviedb.org/3/search/movie?api_key=".concat(O,"&language=en-US&query=").concat(e.query,"&page=1&include_adult=false"),t.prev=2,t.next=5,fetch(n);case 5:return i=t.sent,t.next=8,i.json();case 8:a=t.sent,console.log(a),a.results&&a.results.length>0&&c(a.results),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(2),console.error(t.t0);case 16:case"end":return t.stop()}}),t,null,[[2,13]])}))),[1e3]);return function(){clearTimeout(t)}}),[e.query]);var o=a.map((function(t){return Object(x.jsxs)("div",{className:f.a.tile,children:[Object(x.jsx)("div",{className:f.a.tile__media,children:Object(x.jsx)("img",{className:f.a.tile__img,src:"https://image.tmdb.org/t/p/original".concat(t.poster_path),alt:"movie"})}),Object(x.jsxs)("div",{className:f.a.tile__details,children:[Object(x.jsx)("div",{className:f.a.tile__title,children:t.title}),Object(x.jsx)("div",{className:f.a.tile__more,onClick:function(){return function(e){console.log("movie :>> ",e)}(t)},children:"..."}),Object(x.jsx)("div",{className:f.a.tile__add,onClick:function(){return function(t){e.onAddHandler(t)}(t)},children:"+"})]})]},t.id)}));return Object(x.jsx)("div",{className:f.a.row,children:Object(x.jsx)("div",{className:f.a.row__inner,children:o})})},w=function(e){var t=Object(i.useState)(""),n=Object(u.a)(t,2),a=n[0],c=n[1],o=Object(i.useState)({}),r=Object(u.a)(o,2),s=r[0],l=r[1];return Object(x.jsxs)("div",{className:p.a.contain,children:[Object(x.jsx)("div",{className:p.a.searchbar,children:Object(x.jsxs)("label",{className:p.a.label,children:["Search Movie:",Object(x.jsx)("input",{className:p.a.input,type:"text",value:a,onChange:function(e){c(e.target.value)}})]})}),Object(x.jsx)("div",{className:p.a.row,children:a&&Object(x.jsx)(g,{onAddHandler:function(t){l(t),console.log("received from child",s),e.onAddHandler(t)},query:a})})]})},N=n(12),M=n.n(N),y=n(16),k=n(8),C=n.n(k),S=n(14),B=n.n(S),D=function(e){return Object(x.jsx)("div",{className:B.a.backdrop,onClick:e.onClick})},H=function(e){return Object(x.jsx)("div",{className:B.a.modal,children:Object(x.jsx)("div",{className:B.a.content,children:e.children})})},I=document.getElementById("overlays"),A=function(e){return Object(x.jsxs)(i.Fragment,{children:[o.a.createPortal(Object(x.jsx)(D,{onClick:e.onBackdropClick}),I),o.a.createPortal(Object(x.jsx)(H,{children:e.children}),I)]})},T=function(e){var t=Object(i.useState)({}),n=Object(u.a)(t,2),a=n[0],c=n[1];Object(i.useEffect)((function(){(function(){var t=Object(_.a)(d.a.mark((function t(){var n,i,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="https://api.themoviedb.org/3/movie/".concat(e.movie_id,"?api_key=").concat(O,"&language=en-US"),t.next=3,fetch(n);case 3:return i=t.sent,t.next=6,i.json();case 6:a=t.sent,console.log(a),c(a);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e.movie_id]);var o=Object(x.jsxs)("div",{className:C.a.modal,children:[Object(x.jsx)("img",{className:C.a.poster,src:"https://image.tmdb.org/t/p/original".concat(a.poster_path),align:"left",alt:"poster"}),Object(x.jsxs)("div",{className:C.a.overview,children:[Object(x.jsx)("h2",{children:a.title}),Object(x.jsx)("div",{className:C.a.overview,children:a.overview}),Object(x.jsxs)("p",{children:["vote average: ",a.vote_average," - vote count: ",a.vote_count]}),Object(x.jsxs)("div",{className:C.a.financials,children:["budget: ",a.budget]})]})]});return Object(x.jsxs)(A,{onBackdropClick:e.onClose,children:[Object(x.jsx)("span",{children:o}),";",Object(x.jsx)("div",{className:C.a.actions,children:Object(x.jsx)("button",{onClick:e.onClose,children:"OK"})})]})},W=n(4),F=n.n(W),L=function(e){var t=Object(i.useState)(!1),n=Object(u.a)(t,2),a=n[0],c=n[1];return Object(x.jsxs)("div",{className:F.a.tile,children:[Object(x.jsx)("div",{className:F.a.tile__media,children:Object(x.jsx)("img",{className:F.a.tile__img,src:"https://image.tmdb.org/t/p/original".concat(e.movie.poster_path),alt:"movie"})}),Object(x.jsxs)("div",{className:F.a.tile__details,children:[Object(x.jsx)("div",{className:F.a.tile__title,children:e.movie.title}),Object(x.jsxs)("div",{className:F.a.tile__more,children:[Object(x.jsx)("div",{className:F.a.tile__button,onClick:function(){console.log("getting details of movie :>> ",e.movie.id),c(!0)},children:"..."}),a&&Object(x.jsx)(T,{onClose:function(){c((function(e){return!e}))},movie_id:e.movie.id})]}),Object(x.jsx)("div",{className:F.a.tile__watched,children:Object(x.jsx)("div",{className:F.a.tile__button,onClick:function(){return t=e.movie,void e.onWatchedHandler(t);var t},children:e.movie.watched?Object(x.jsx)(y.a,{}):Object(x.jsx)(y.b,{})})}),Object(x.jsx)("div",{className:F.a.tile__remove,children:Object(x.jsx)("div",{className:F.a.tile__button,onClick:function(){return t=e.movie,void e.onRemoveHandler(t);var t},children:"X"})})]})]})},R=function(e){var t=e.movies.map((function(t){return Object(x.jsx)(L,{movie:t,onRemoveHandler:e.onRemoveHandler,onWatchedHandler:e.onWatchedHandler},t._id)}));return Object(x.jsxs)("div",{className:M.a.contain,children:[Object(x.jsx)("div",{className:M.a.sectionname,children:"WATCH LIST"}),Object(x.jsx)("div",{className:M.a.row,children:Object(x.jsx)("div",{className:M.a.row_inner,children:t})})]})},E=[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}],q=function(e){var t=[];return e.map((function(e){var n=E.find((function(t){return t.id===e}));return t.push(n.name),t})),console.log(t.toString()),t.toString()};var J=function(){var e=Object(i.useState)([]),t=Object(u.a)(e,2),n=t[0],a=t[1];Object(i.useEffect)((function(){c()}),[]);var c=function(){var e=Object(_.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.getAllMovies().then((function(e){a(e.data.data)})).catch((function(e){console.log("error",e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=Object(_.a)(d.a.mark((function e(t){var i,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("adding ",t),i=q(t.genre_ids),c={id:t.id,title:t.title,genres:i,poster_path:t.poster_path,overview:t.overview,vote_average:Number(t.vote_average),watched:!1},e.next=5,j.insertMovie(c).then((function(e){c._id=e.data.id,console.log("res",c._id)}));case 5:a([].concat(Object(s.a)(n),[c]));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(_.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("in App, adding ",t.title),e.next=3,j.getMovieByTMDBId(t.id).catch((function(e){console.log("not a duplicate, OK to add ",t.title)}));case 3:null==e.sent?o(t):console.log("dupe ",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(_.a)(d.a.mark((function e(t){var i,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=Object(r.a)({},t)).watched=!i.watched,e.next=4,j.updateMovieById(t._id,i);case 4:c=n.filter((function(e){return e._id!==t._id})),a([].concat(Object(s.a)(c),[i]));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(_.a)(d.a.mark((function e(t){var i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.deleteMovieById(t._id);case 2:i=n.filter((function(e){return e._id!==t._id})),a(i);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{children:[Object(x.jsx)(R,{movies:n,onWatchedHandler:v,onRemoveHandler:m}),Object(x.jsx)(w,{onAddHandler:l})]})},P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,54)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),i(e),a(e),c(e),o(e)}))};o.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(J,{})}),document.getElementById("root")),P()},7:function(e,t,n){e.exports={row:"Dropdown_row__3xoY_",row__inner:"Dropdown_row__inner__35nO8",tile:"Dropdown_tile__ejoI5",tile__img:"Dropdown_tile__img__1TAPm",tile__details:"Dropdown_tile__details__2rIHu",tile__title:"Dropdown_tile__title__1ybBb",tile__more:"Dropdown_tile__more__2-1JQ",tile__add:"Dropdown_tile__add__2ZQY-",sectionname:"Dropdown_sectionname__1JRG8"}},8:function(e,t,n){e.exports={actions:"Overview_actions__3dNDS","button--alt":"Overview_button--alt__3Pl-U",button:"Overview_button__3SS0J",poster:"Overview_poster__3Rslm",overview:"Overview_overview__3IC4U"}},9:function(e,t,n){e.exports={searchbar:"SearchMovie_searchbar__1Bg7G",label:"SearchMovie_label__nOXED",input:"SearchMovie_input__3dNpO",button:"SearchMovie_button__3uYqo",contain:"SearchMovie_contain__3c1e0",row:"SearchMovie_row__32G-r"}}},[[53,1,2]]]);
//# sourceMappingURL=main.cd0d0d57.chunk.js.map