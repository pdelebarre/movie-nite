{"ast":null,"code":"var _require = require('../../lib-util'),\n    isObject = _require.isObject,\n    buildCall = _require.buildCall,\n    mapJoin = _require.mapJoin;\n\nmodule.exports = function (ctx) {\n  if (ctx.ord.length === 0) return;\n  var txt = calls(ctx, ctx.ord);\n  return txt && \"order by \".concat(txt);\n};\n\nvar buildArg = function buildArg(ctx, arg) {\n  if (typeof arg === 'string') return arg;\n  if (typeof arg === 'function') return ctx.build(arg);\n  if (isObject(arg)) return buildObject(ctx, arg);\n  throw Error('Invalid order by argument:', arg);\n};\n\nvar buildObject = function buildObject(ctx, obj) {\n  var txt = '';\n  var by = obj.by,\n      sort = obj.sort,\n      using = obj.using,\n      nulls = obj.nulls; // by\n\n  if (typeof by === 'string') txt += by;else if (typeof by === 'function') txt += ctx.build(by);else throw Error('Invalid order by property \"by\"'); // sort\n\n  if (sort) {\n    if (sort === 'desc') txt += ' desc';else if (sort === 'asc') txt += ' asc';else if (typeof sort === 'string') txt += \" using \".concat(sort);else throw Error('Invalid order by property \"sort\"');\n  } else if (using) {\n    if (typeof using === 'string') txt += \" using \".concat(using);else throw Error('Invalid order by property \"using\"');\n  } // nulls\n\n\n  if (nulls === undefined) ;else if (nulls === 'last') txt += ' nulls last';else if (nulls === 'first') txt += ' nulls first';else throw Error('Invalid order by property \"nulls\"'); // return\n\n  return txt;\n};\n\nvar calls = mapJoin(buildCall(mapJoin(buildArg)));","map":{"version":3,"sources":["/Volumes/LaCie/Dev/myProjects/movie-nite/node_modules/EasyQB/src/lib-sq/clauses/order.js"],"names":["require","isObject","buildCall","mapJoin","module","exports","ctx","ord","length","txt","calls","buildArg","arg","build","buildObject","Error","obj","by","sort","using","nulls","undefined"],"mappings":"eAAyCA,OAAO,CAAC,gBAAD,C;IAAxCC,Q,YAAAA,Q;IAAUC,S,YAAAA,S;IAAWC,O,YAAAA,O;;AAE7BC,MAAM,CAACC,OAAP,GAAiB,UAAAC,GAAG,EAAI;AACtB,MAAIA,GAAG,CAACC,GAAJ,CAAQC,MAAR,KAAmB,CAAvB,EAA0B;AAC1B,MAAMC,GAAG,GAAGC,KAAK,CAACJ,GAAD,EAAMA,GAAG,CAACC,GAAV,CAAjB;AACA,SAAOE,GAAG,uBAAgBA,GAAhB,CAAV;AACD,CAJD;;AAMA,IAAME,QAAQ,GAAG,SAAXA,QAAW,CAACL,GAAD,EAAMM,GAAN,EAAc;AAC7B,MAAI,OAAOA,GAAP,KAAe,QAAnB,EAA6B,OAAOA,GAAP;AAC7B,MAAI,OAAOA,GAAP,KAAe,UAAnB,EAA+B,OAAON,GAAG,CAACO,KAAJ,CAAUD,GAAV,CAAP;AAC/B,MAAIX,QAAQ,CAACW,GAAD,CAAZ,EAAmB,OAAOE,WAAW,CAACR,GAAD,EAAMM,GAAN,CAAlB;AACnB,QAAMG,KAAK,CAAC,4BAAD,EAA+BH,GAA/B,CAAX;AACD,CALD;;AAOA,IAAME,WAAW,GAAG,SAAdA,WAAc,CAACR,GAAD,EAAMU,GAAN,EAAc;AAChC,MAAIP,GAAG,GAAG,EAAV;AADgC,MAExBQ,EAFwB,GAEGD,GAFH,CAExBC,EAFwB;AAAA,MAEpBC,IAFoB,GAEGF,GAFH,CAEpBE,IAFoB;AAAA,MAEdC,KAFc,GAEGH,GAFH,CAEdG,KAFc;AAAA,MAEPC,KAFO,GAEGJ,GAFH,CAEPI,KAFO,EAGhC;;AACA,MAAI,OAAOH,EAAP,KAAc,QAAlB,EAA4BR,GAAG,IAAIQ,EAAP,CAA5B,KACK,IAAI,OAAOA,EAAP,KAAc,UAAlB,EAA8BR,GAAG,IAAIH,GAAG,CAACO,KAAJ,CAAUI,EAAV,CAAP,CAA9B,KACA,MAAMF,KAAK,CAAC,gCAAD,CAAX,CAN2B,CAOhC;;AACA,MAAIG,IAAJ,EAAU;AACR,QAAIA,IAAI,KAAK,MAAb,EAAqBT,GAAG,IAAI,OAAP,CAArB,KACK,IAAIS,IAAI,KAAK,KAAb,EAAoBT,GAAG,IAAI,MAAP,CAApB,KACA,IAAI,OAAOS,IAAP,KAAgB,QAApB,EAA8BT,GAAG,qBAAcS,IAAd,CAAH,CAA9B,KACA,MAAMH,KAAK,CAAC,kCAAD,CAAX;AACN,GALD,MAKO,IAAII,KAAJ,EAAW;AAChB,QAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+BV,GAAG,qBAAcU,KAAd,CAAH,CAA/B,KACK,MAAMJ,KAAK,CAAC,mCAAD,CAAX;AACN,GAhB+B,CAiBhC;;;AACA,MAAIK,KAAK,KAAKC,SAAd,EAAwB,CAAxB,KACK,IAAID,KAAK,KAAK,MAAd,EAAsBX,GAAG,IAAI,aAAP,CAAtB,KACA,IAAIW,KAAK,KAAK,OAAd,EAAuBX,GAAG,IAAI,cAAP,CAAvB,KACA,MAAMM,KAAK,CAAC,mCAAD,CAAX,CArB2B,CAsBhC;;AACA,SAAON,GAAP;AACD,CAxBD;;AA0BA,IAAMC,KAAK,GAAGP,OAAO,CAACD,SAAS,CAACC,OAAO,CAACQ,QAAD,CAAR,CAAV,CAArB","sourcesContent":["const { isObject, buildCall, mapJoin } = require('../../lib-util')\n\nmodule.exports = ctx => {\n  if (ctx.ord.length === 0) return\n  const txt = calls(ctx, ctx.ord)\n  return txt && `order by ${txt}`\n}\n\nconst buildArg = (ctx, arg) => {\n  if (typeof arg === 'string') return arg\n  if (typeof arg === 'function') return ctx.build(arg)\n  if (isObject(arg)) return buildObject(ctx, arg)\n  throw Error('Invalid order by argument:', arg)\n}\n\nconst buildObject = (ctx, obj) => {\n  let txt = ''\n  const { by, sort, using, nulls } = obj\n  // by\n  if (typeof by === 'string') txt += by\n  else if (typeof by === 'function') txt += ctx.build(by)\n  else throw Error('Invalid order by property \"by\"')\n  // sort\n  if (sort) {\n    if (sort === 'desc') txt += ' desc'\n    else if (sort === 'asc') txt += ' asc'\n    else if (typeof sort === 'string') txt += ` using ${sort}`\n    else throw Error('Invalid order by property \"sort\"')\n  } else if (using) {\n    if (typeof using === 'string') txt += ` using ${using}`\n    else throw Error('Invalid order by property \"using\"')\n  }\n  // nulls\n  if (nulls === undefined);\n  else if (nulls === 'last') txt += ' nulls last'\n  else if (nulls === 'first') txt += ' nulls first'\n  else throw Error('Invalid order by property \"nulls\"')\n  // return\n  return txt\n}\n\nconst calls = mapJoin(buildCall(mapJoin(buildArg)))\n"]},"metadata":{},"sourceType":"script"}