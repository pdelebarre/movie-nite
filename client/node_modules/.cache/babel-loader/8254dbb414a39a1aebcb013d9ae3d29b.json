{"ast":null,"code":"var _jsxFileName = \"/Volumes/LaCie/Dev/myProjects/movie-nite/src/components/Search/AddMovieButton.js\",\n    _s = $RefreshSig$();\n\nimport { useEasybase, EasybaseProvider, callFunction } from \"easybase-react\";\nimport ebconfig from \"../../ebconfig\";\nimport classes from \"./AddMovieButton.module.css\";\nimport GENRES from \"../../resources/genres\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst getGenres = genre_ids => {\n  let genres_array = [];\n  genre_ids.map(id => {\n    const result = GENRES.find(genre => genre.id === id);\n    genres_array.push(result.name);\n    return genres_array;\n  });\n  console.log(genres_array.toString());\n  return genres_array.toString();\n};\n\nconst AddMovieButton = props => {\n  _s();\n\n  const {\n    db,\n    e\n  } = useEasybase();\n  const table = useEasybase({\n    ebconfig\n  }).db(\"MOVIES\");\n\n  const movieExists = async id => {\n    try {\n      let singleRecord = await table().return().where(e.eq(\"id\", id)).one();\n      return singleRecord !== null;\n    } catch (exception) {}\n\n    return false;\n  };\n\n  const onAddMovie = movie => {\n    if (movieExists(movie.id)) return;\n    let genres = getGenres(movie.genre_ids);\n    db(\"MOVIES\").insert({\n      title: movie.title,\n      genres: genres,\n      posterpath: movie.poster_path,\n      watched: false,\n      overview: movie.overview,\n      voteaverage: Number(movie.vote_average),\n      id: movie.id\n    }).one();\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"tr\", {\n    className: classes.tr,\n    onClick: onAddMovie.bind(null, props.movie),\n    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n      children: props.movie.title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      className: classes.vote,\n      children: props.movie.vote_average\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this)]\n  }, props.movie.id, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n};\n\n_s(AddMovieButton, \"/Bckf78PFKRZeQaGaDK3rNSqJfk=\", false, function () {\n  return [useEasybase, useEasybase];\n});\n\n_c = AddMovieButton;\nexport default AddMovieButton;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddMovieButton\");","map":{"version":3,"sources":["/Volumes/LaCie/Dev/myProjects/movie-nite/src/components/Search/AddMovieButton.js"],"names":["useEasybase","EasybaseProvider","callFunction","ebconfig","classes","GENRES","getGenres","genre_ids","genres_array","map","id","result","find","genre","push","name","console","log","toString","AddMovieButton","props","db","e","table","movieExists","singleRecord","return","where","eq","one","exception","onAddMovie","movie","genres","insert","title","posterpath","poster_path","watched","overview","voteaverage","Number","vote_average","tr","bind","vote"],"mappings":";;;AAAA,SAASA,WAAT,EAAsBC,gBAAtB,EAAwCC,YAAxC,QAA4D,gBAA5D;AACA,OAAOC,QAAP,MAAqB,gBAArB;AACA,OAAOC,OAAP,MAAoB,6BAApB;AAEA,OAAOC,MAAP,MAAmB,wBAAnB;;;AAEA,MAAMC,SAAS,GAAIC,SAAD,IAAe;AAC/B,MAAIC,YAAY,GAAG,EAAnB;AACAD,EAAAA,SAAS,CAACE,GAAV,CAAeC,EAAD,IAAQ;AACpB,UAAMC,MAAM,GAAGN,MAAM,CAACO,IAAP,CAAaC,KAAD,IAAWA,KAAK,CAACH,EAAN,KAAaA,EAApC,CAAf;AACAF,IAAAA,YAAY,CAACM,IAAb,CAAkBH,MAAM,CAACI,IAAzB;AACA,WAAOP,YAAP;AACD,GAJD;AAMAQ,EAAAA,OAAO,CAACC,GAAR,CAAYT,YAAY,CAACU,QAAb,EAAZ;AACA,SAAOV,YAAY,CAACU,QAAb,EAAP;AACD,CAVD;;AAYA,MAAMC,cAAc,GAAIC,KAAD,IAAW;AAAA;;AAEhC,QAAM;AAAEC,IAAAA,EAAF;AAAMC,IAAAA;AAAN,MAAYtB,WAAW,EAA7B;AACA,QAAMuB,KAAK,GAAGvB,WAAW,CAAC;AAAEG,IAAAA;AAAF,GAAD,CAAX,CAA0BkB,EAA1B,CAA6B,QAA7B,CAAd;;AAGA,QAAMG,WAAW,GAAG,MAAOd,EAAP,IAAc;AAChC,QAAI;AACF,UAAIe,YAAY,GAAG,MAAMF,KAAK,GAAGG,MAAR,GAAiBC,KAAjB,CAAuBL,CAAC,CAACM,EAAF,CAAK,IAAL,EAAWlB,EAAX,CAAvB,EAAuCmB,GAAvC,EAAzB;AACA,aAAOJ,YAAY,KAAK,IAAxB;AACD,KAHD,CAGE,OAAOK,SAAP,EAAkB,CAAE;;AACtB,WAAO,KAAP;AACD,GAND;;AAUA,QAAMC,UAAU,GAAIC,KAAD,IAAW;AAC5B,QAAGR,WAAW,CAACQ,KAAK,CAACtB,EAAP,CAAd,EAA0B;AAE1B,QAAIuB,MAAM,GAAG3B,SAAS,CAAC0B,KAAK,CAACzB,SAAP,CAAtB;AACAc,IAAAA,EAAE,CAAC,QAAD,CAAF,CACGa,MADH,CACU;AACNC,MAAAA,KAAK,EAAEH,KAAK,CAACG,KADP;AAENF,MAAAA,MAAM,EAAEA,MAFF;AAGNG,MAAAA,UAAU,EAAEJ,KAAK,CAACK,WAHZ;AAINC,MAAAA,OAAO,EAAE,KAJH;AAKNC,MAAAA,QAAQ,EAAEP,KAAK,CAACO,QALV;AAMNC,MAAAA,WAAW,EAAEC,MAAM,CAACT,KAAK,CAACU,YAAP,CANb;AAONhC,MAAAA,EAAE,EAAEsB,KAAK,CAACtB;AAPJ,KADV,EAUGmB,GAVH;AAWD,GAfD;;AAiBA,sBACE;AAEE,IAAA,SAAS,EAAEzB,OAAO,CAACuC,EAFrB;AAGE,IAAA,OAAO,EAAEZ,UAAU,CAACa,IAAX,CAAgB,IAAhB,EAAsBxB,KAAK,CAACY,KAA5B,CAHX;AAAA,4BAKE;AAAA,gBAAKZ,KAAK,CAACY,KAAN,CAAYG;AAAjB;AAAA;AAAA;AAAA;AAAA,YALF,eAME;AAAI,MAAA,SAAS,EAAE/B,OAAO,CAACyC,IAAvB;AAAA,gBAA8BzB,KAAK,CAACY,KAAN,CAAYU;AAA1C;AAAA;AAAA;AAAA;AAAA,YANF;AAAA,KACOtB,KAAK,CAACY,KAAN,CAAYtB,EADnB;AAAA;AAAA;AAAA;AAAA,UADF;AAUD,CA3CD;;GAAMS,c;UAEcnB,W,EACJA,W;;;KAHVmB,c;AA6CN,eAAeA,cAAf","sourcesContent":["import { useEasybase, EasybaseProvider, callFunction } from \"easybase-react\";\nimport ebconfig from \"../../ebconfig\";\nimport classes from \"./AddMovieButton.module.css\";\n\nimport GENRES from \"../../resources/genres\";\n\nconst getGenres = (genre_ids) => {\n  let genres_array = [];\n  genre_ids.map((id) => {\n    const result = GENRES.find((genre) => genre.id === id);\n    genres_array.push(result.name);\n    return genres_array;\n  });\n\n  console.log(genres_array.toString());\n  return genres_array.toString();\n};\n\nconst AddMovieButton = (props) => {\n\n  const { db, e } = useEasybase();\n  const table = useEasybase({ ebconfig }).db(\"MOVIES\");\n\n\n  const movieExists = async (id) => {\n    try {\n      let singleRecord = await table().return().where(e.eq(\"id\", id)).one();\n      return singleRecord !== null;\n    } catch (exception) {}\n    return false;\n  };\n\n\n\n  const onAddMovie = (movie) => {\n    if(movieExists(movie.id)) return;\n\n    let genres = getGenres(movie.genre_ids);\n    db(\"MOVIES\")\n      .insert({\n        title: movie.title,\n        genres: genres,\n        posterpath: movie.poster_path,\n        watched: false,\n        overview: movie.overview,\n        voteaverage: Number(movie.vote_average),\n        id: movie.id,\n      })\n      .one();\n  };\n\n  return (\n    <tr\n      key={props.movie.id}\n      className={classes.tr}\n      onClick={onAddMovie.bind(null, props.movie)}\n    >\n      <td>{props.movie.title}</td>\n      <td className={classes.vote}>{props.movie.vote_average}</td>\n    </tr>\n  );\n};\n\nexport default AddMovieButton;\n"]},"metadata":{},"sourceType":"module"}