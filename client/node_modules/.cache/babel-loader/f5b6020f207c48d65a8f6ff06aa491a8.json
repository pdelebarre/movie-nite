{"ast":null,"code":"import _regeneratorRuntime from\"/Volumes/LaCie/Dev/myProjects/movie-nite/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Volumes/LaCie/Dev/myProjects/movie-nite/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Volumes/LaCie/Dev/myProjects/movie-nite/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import classes from\"./Dropdown.module.css\";import{TMDB_API_KEY}from\"../../store/keys\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Dropdown=function Dropdown(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),results=_useState2[0],setResults=_useState2[1];useEffect(function(){var delayDebounceFn=setTimeout(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var url,res,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"in dropdown, query = \",props.query);url=\"https://api.themoviedb.org/3/search/movie?api_key=\".concat(TMDB_API_KEY,\"&language=en-US&query=\").concat(props.query,\"&page=1&include_adult=false\");_context.prev=2;_context.next=5;return fetch(url);case 5:res=_context.sent;_context.next=8;return res.json();case 8:data=_context.sent;console.log(data);if(data.results&&data.results.length>0){setResults(data.results);}_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](2);console.error(_context.t0);case 16:case\"end\":return _context.stop();}}},_callee,null,[[2,13]]);})),[1000]);return function(){clearTimeout(delayDebounceFn);};},[props.query]);var onAddHandler=function onAddHandler(movie){props.onAddHandler(movie);};var onDetailsHandler=function onDetailsHandler(movie){console.log('movie :>> ',movie);};var listMovies=results.map(function(movie){return/*#__PURE__*/_jsxs(\"div\",{className:classes.tile,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.tile__media,children:/*#__PURE__*/_jsx(\"img\",{className:classes.tile__img,src:\"https://image.tmdb.org/t/p/original\".concat(movie.poster_path),alt:\"movie\"})}),/*#__PURE__*/_jsxs(\"div\",{className:classes.tile__details,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.tile__title,children:movie.title}),/*#__PURE__*/_jsx(\"div\",{className:classes.tile__more,onClick:function onClick(){return onDetailsHandler(movie);},children:\"...\"}),/*#__PURE__*/_jsx(\"div\",{className:classes.tile__add,onClick:function onClick(){return onAddHandler(movie);},children:\"+\"})]})]},movie.id);});return/*#__PURE__*/_jsx(\"div\",{className:classes.row,children:/*#__PURE__*/_jsx(\"div\",{className:classes.row__inner,children:listMovies})});};export default Dropdown;","map":{"version":3,"sources":["/Volumes/LaCie/Dev/myProjects/movie-nite/client/src/components/Movie/Dropdown.js"],"names":["React","useEffect","useState","classes","TMDB_API_KEY","Dropdown","props","results","setResults","delayDebounceFn","setTimeout","console","log","query","url","fetch","res","json","data","length","error","clearTimeout","onAddHandler","movie","onDetailsHandler","listMovies","map","tile","tile__media","tile__img","poster_path","tile__details","tile__title","title","tile__more","tile__add","id","row","row__inner"],"mappings":"+eACA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CAEA,MAAOC,CAAAA,OAAP,KAAoB,uBAApB,CAEA,OAASC,YAAT,KAA6B,kBAA7B,C,wFAEA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,KAAD,CAAW,CAC1B,cAA8BJ,QAAQ,CAAC,EAAD,CAAtC,wCAAOK,OAAP,eAAgBC,UAAhB,eAEAP,SAAS,CAAC,UAAM,CACd,GAAMQ,CAAAA,eAAe,CAAGC,UAAU,sEAAC,oJACjCC,OAAO,CAACC,GAAR,CAAY,uBAAZ,CAAqCN,KAAK,CAACO,KAA3C,EACMC,GAF2B,6DAEgCV,YAFhC,kCAEqEE,KAAK,CAACO,KAF3E,sEAIbE,CAAAA,KAAK,CAACD,GAAD,CAJQ,QAIzBE,GAJyB,qCAKZA,CAAAA,GAAG,CAACC,IAAJ,EALY,QAKzBC,IALyB,eAM/BP,OAAO,CAACC,GAAR,CAAYM,IAAZ,EACA,GAAIA,IAAI,CAACX,OAAL,EAAgBW,IAAI,CAACX,OAAL,CAAaY,MAAb,CAAsB,CAA1C,CAA6C,CAC3CX,UAAU,CAACU,IAAI,CAACX,OAAN,CAAV,CACD,CAT8B,iFAW/BI,OAAO,CAACS,KAAR,cAX+B,qEAAD,GAa/B,CAAC,IAAD,CAb+B,CAAlC,CAeA,MAAO,WAAM,CACXC,YAAY,CAACZ,eAAD,CAAZ,CACD,CAFD,CAGD,CAnBQ,CAmBN,CAACH,KAAK,CAACO,KAAP,CAnBM,CAAT,CAqBA,GAAMS,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,KAAD,CAAW,CAC9BjB,KAAK,CAACgB,YAAN,CAAmBC,KAAnB,EACD,CAFD,CAKA,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACD,KAAD,CAAW,CAClCZ,OAAO,CAACC,GAAR,CAAY,YAAZ,CAA0BW,KAA1B,EAED,CAHD,CAKA,GAAME,CAAAA,UAAU,CAAGlB,OAAO,CAACmB,GAAR,CAAY,SAACH,KAAD,qBAE7B,aAAK,SAAS,CAAEpB,OAAO,CAACwB,IAAxB,wBACE,YAAK,SAAS,CAAExB,OAAO,CAACyB,WAAxB,uBACE,YACE,SAAS,CAAEzB,OAAO,CAAC0B,SADrB,CAEE,GAAG,8CAAwCN,KAAK,CAACO,WAA9C,CAFL,CAGE,GAAG,CAAC,OAHN,EADF,EADF,cASE,aAAK,SAAS,CAAE3B,OAAO,CAAC4B,aAAxB,wBACI,YAAK,SAAS,CAAE5B,OAAO,CAAC6B,WAAxB,UACCT,KAAK,CAACU,KADP,EADJ,cAII,YAAK,SAAS,CAAE9B,OAAO,CAAC+B,UAAxB,CAAoC,OAAO,CAAE,yBAAIV,CAAAA,gBAAgB,CAACD,KAAD,CAApB,EAA7C,iBAJJ,cAKI,YAAK,SAAS,CAAEpB,OAAO,CAACgC,SAAxB,CAAmC,OAAO,CAAE,yBAAIb,CAAAA,YAAY,CAACC,KAAD,CAAhB,EAA5C,eALJ,GATF,GAAmCA,KAAK,CAACa,EAAzC,CAF6B,EAAZ,CAAnB,CAqBA,mBACE,YAAK,SAAS,CAAEjC,OAAO,CAACkC,GAAxB,uBACE,YAAK,SAAS,CAAElC,OAAO,CAACmC,UAAxB,UAAqCb,UAArC,EADF,EADF,CAKD,CA5DD,CA8DA,cAAepB,CAAAA,QAAf","sourcesContent":["\nimport React, { useEffect, useState } from \"react\";\n\nimport classes from \"./Dropdown.module.css\";\n\nimport { TMDB_API_KEY } from \"../../store/keys\";\n\nconst Dropdown = (props) => {\n  const [results, setResults] = useState([]);\n\n  useEffect(() => {\n    const delayDebounceFn = setTimeout(async () => {\n      console.log(\"in dropdown, query = \", props.query);\n      const url = `https://api.themoviedb.org/3/search/movie?api_key=${TMDB_API_KEY}&language=en-US&query=${props.query}&page=1&include_adult=false`;\n      try {\n        const res = await fetch(url);\n        const data = await res.json();\n        console.log(data);\n        if (data.results && data.results.length > 0) {\n          setResults(data.results);\n        }\n      } catch (err) {\n        console.error(err);\n      }\n    }, [1000]);\n\n    return () => {\n      clearTimeout(delayDebounceFn);\n    };\n  }, [props.query]);\n\n  const onAddHandler = (movie) => {\n    props.onAddHandler(movie);\n  };\n\n\n  const onDetailsHandler = (movie) => {\n    console.log('movie :>> ', movie);\n    \n  }\n\n  const listMovies = results.map((movie) => (\n\n    <div className={classes.tile} key={movie.id}>\n      <div className={classes.tile__media}>\n        <img\n          className={classes.tile__img}\n          src={`https://image.tmdb.org/t/p/original${movie.poster_path}`}\n          alt=\"movie\"\n        ></img>\n      </div>\n      {/* TODO: add link to preview (Modal?) */}\n      <div className={classes.tile__details}>\n          <div className={classes.tile__title}>\n          {movie.title}\n          </div>\n          <div className={classes.tile__more} onClick={()=>onDetailsHandler(movie)}>...</div>\n          <div className={classes.tile__add} onClick={()=>onAddHandler(movie)}>+</div>\n      \n        </div>\n    </div>\n  ));\n  return (\n    <div className={classes.row}>\n      <div className={classes.row__inner}>{listMovies}</div>\n    </div>\n  );\n};\n\nexport default Dropdown;\n"]},"metadata":{},"sourceType":"module"}