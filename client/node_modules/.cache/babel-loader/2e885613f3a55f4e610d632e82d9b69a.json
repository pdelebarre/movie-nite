{"ast":null,"code":"import _regeneratorRuntime from\"/Volumes/LaCie/Dev/myProjects/movie-nite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Volumes/LaCie/Dev/myProjects/movie-nite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Volumes/LaCie/Dev/myProjects/movie-nite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import Results from\"../Search/Results\";import classes from\"./SearchMovie.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function SearchMovie(props){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),query=_useState2[0],setQuery=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),results=_useState4[0],setResults=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isVisible=_useState6[0],setIsVisible=_useState6[1];// const searchMovies = async (e) => {\n//   e.preventDefault();\n//   console.log(\"submitting\");\n//   const url = `https://api.themoviedb.org/3/search/movie?api_key=5dcf7f28a88be0edc01bbbde06f024ab&language=en-US&query=${query}&page=1&include_adult=false`;\n//   try {\n//     const res = await fetch(url);\n//     const data = await res.json();\n//     console.log(data);\n//     setResults(data.results);\n//     //setIsVisible(true);\n//   } catch (err) {\n//     console.error(err);\n//   }\n// };\nuseEffect(function(){var delayDebounceFn=setTimeout(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var url,res,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0://e.preventDefault();\nconsole.log(query);url=\"https://api.themoviedb.org/3/search/movie?api_key=5dcf7f28a88be0edc01bbbde06f024ab&language=en-US&query=\".concat(query,\"&page=1&include_adult=false\");_context.prev=2;_context.next=5;return fetch(url);case 5:res=_context.sent;_context.next=8;return res.json();case 8:data=_context.sent;console.log(data);setResults(data.results);setIsVisible(true);_context.next=18;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](2);console.error(_context.t0);setIsVisible(false);case 18:case\"end\":return _context.stop();}}},_callee,null,[[2,14]]);})),[1000,query.length>0]);return function(){return clearTimeout(delayDebounceFn);};},[query]);var onChangeHandler=function onChangeHandler(event){// if(!event.target.value) {\n//   setIsVisible(false);\n// } ;\nsetQuery(event.target.value);};var onSelectHandler=function onSelectHandler(movie){//setIsVisible(query.length() > 1);\nsetIsVisible(false);return props.onSelect(movie);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"label\",{className:classes[\"search-label\"],htmlFor:\"query\",children:\"Movie Name\"}),/*#__PURE__*/_jsx(\"input\",{className:classes[\"search-input\"],type:\"text\",name:\"query\",placeholder:\"i.e. Jurassic Park\",onChange:onChangeHandler,value:query}),isVisible&&results&&results.length>0&&/*#__PURE__*/_jsx(Results,{results:results,onSelect:onSelectHandler})]});}","map":{"version":3,"sources":["/Volumes/LaCie/Dev/myProjects/movie-nite/src/components/Movie/SearchMovie.js"],"names":["React","useState","useEffect","Results","classes","SearchMovie","props","query","setQuery","results","setResults","isVisible","setIsVisible","delayDebounceFn","setTimeout","console","log","url","fetch","res","json","data","error","length","clearTimeout","onChangeHandler","event","target","value","onSelectHandler","movie","onSelect"],"mappings":"0dAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,OAAP,KAAoB,mBAApB,CACA,MAAOC,CAAAA,OAAP,KAAoB,0BAApB,C,6IAEA,cAAe,SAASC,CAAAA,WAAT,CAAqBC,KAArB,CAA4B,eACfL,QAAQ,CAAC,EAAD,CADO,wCAClCM,KADkC,eAC3BC,QAD2B,8BAEXP,QAAQ,CAAC,EAAD,CAFG,yCAElCQ,OAFkC,eAEzBC,UAFyB,8BAGPT,QAAQ,CAAC,KAAD,CAHD,yCAGlCU,SAHkC,eAGvBC,YAHuB,eAKzC;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEAV,SAAS,CAAC,UAAM,CACd,GAAMW,CAAAA,eAAe,CAAGC,UAAU,sEAAC,oJACjC;AACAC,OAAO,CAACC,GAAR,CAAYT,KAAZ,EACMU,GAH2B,mHAGsFV,KAHtF,sEAObW,CAAAA,KAAK,CAACD,GAAD,CAPQ,QAOzBE,GAPyB,qCAQZA,CAAAA,GAAG,CAACC,IAAJ,EARY,QAQzBC,IARyB,eAS/BN,OAAO,CAACC,GAAR,CAAYK,IAAZ,EACAX,UAAU,CAACW,IAAI,CAACZ,OAAN,CAAV,CACAG,YAAY,CAAC,IAAD,CAAZ,CAX+B,iFAc7BG,OAAO,CAACO,KAAR,cACAV,YAAY,CAAC,KAAD,CAAZ,CAf6B,qEAAD,GAiB/B,CAAC,IAAD,CAAOL,KAAK,CAACgB,MAAN,CAAe,CAAtB,CAjB+B,CAAlC,CAmBA,MAAO,kBAAMC,CAAAA,YAAY,CAACX,eAAD,CAAlB,EAAP,CACD,CArBQ,CAqBN,CAACN,KAAD,CArBM,CAAT,CAuBA,GAAMkB,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,KAAD,CAAW,CACjC;AACA;AACA;AACAlB,QAAQ,CAACkB,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAR,CAED,CAND,CAQA,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,KAAD,CAAW,CACjC;AACAlB,YAAY,CAAC,KAAD,CAAZ,CACA,MAAON,CAAAA,KAAK,CAACyB,QAAN,CAAeD,KAAf,CAAP,CACD,CAJD,CAMA,mBACE,wCAEI,cAAO,SAAS,CAAE1B,OAAO,CAAC,cAAD,CAAzB,CAA2C,OAAO,CAAC,OAAnD,wBAFJ,cAKI,cACE,SAAS,CAAEA,OAAO,CAAC,cAAD,CADpB,CAEE,IAAI,CAAC,MAFP,CAGE,IAAI,CAAC,OAHP,CAIE,WAAW,CAAC,oBAJd,CAKE,QAAQ,CAAEqB,eALZ,CAME,KAAK,CAAElB,KANT,EALJ,CAmBGI,SAAS,EAAIF,OAAb,EAAwBA,OAAO,CAACc,MAAR,CAAiB,CAAzC,eAA8C,KAAC,OAAD,EAAS,OAAO,CAAEd,OAAlB,CAA2B,QAAQ,CAAEoB,eAArC,EAnBjD,GADF,CAuBD","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Results from \"../Search/Results\";\nimport classes from \"./SearchMovie.module.css\";\n\nexport default function SearchMovie(props) {\n  const [query, setQuery] = useState(\"\");\n  const [results, setResults] = useState([]);\n  const [isVisible, setIsVisible] = useState(false);\n\n  // const searchMovies = async (e) => {\n  //   e.preventDefault();\n  //   console.log(\"submitting\");\n\n  //   const url = `https://api.themoviedb.org/3/search/movie?api_key=5dcf7f28a88be0edc01bbbde06f024ab&language=en-US&query=${query}&page=1&include_adult=false`;\n\n  //   try {\n  //     const res = await fetch(url);\n  //     const data = await res.json();\n  //     console.log(data);\n  //     setResults(data.results);\n  //     //setIsVisible(true);\n  //   } catch (err) {\n  //     console.error(err);\n  //   }\n  // };\n\n  useEffect(() => {\n    const delayDebounceFn = setTimeout(async () => {\n      //e.preventDefault();\n      console.log(query);\n      const url = `https://api.themoviedb.org/3/search/movie?api_key=5dcf7f28a88be0edc01bbbde06f024ab&language=en-US&query=${query}&page=1&include_adult=false`;\n      try{\n\n        \n        const res = await fetch(url);\n        const data = await res.json();\n        console.log(data)\n        setResults(data.results);\n        setIsVisible(true);\n      }\n        catch (err) {\n          console.error(err);\n          setIsVisible(false);\n        }\n    }, [1000, query.length > 0]);\n\n    return () => clearTimeout(delayDebounceFn);\n  }, [query]);\n\n  const onChangeHandler = (event) => {\n    // if(!event.target.value) {\n    //   setIsVisible(false);\n    // } ;\n    setQuery(event.target.value);\n      \n  };\n\n  const onSelectHandler = (movie) => {\n    //setIsVisible(query.length() > 1);\n    setIsVisible(false);\n    return props.onSelect(movie);\n  };\n\n  return (\n    <>\n      {/* <form className={classes[\"search-form\"]}> */}\n        <label className={classes[\"search-label\"]} htmlFor=\"query\">\n          Movie Name\n        </label>\n        <input\n          className={classes[\"search-input\"]}\n          type=\"text\"\n          name=\"query\"\n          placeholder=\"i.e. Jurassic Park\"\n          onChange={onChangeHandler}\n          value={query}\n        />\n        {/* {query.length > 0 && (\n          <button className={classes[\"search-button\"]} type=\"submit\">\n            Search\n          </button>\n        )} */}\n      {/* </form> */}\n      {isVisible && results && results.length > 0 && <Results results={results} onSelect={onSelectHandler} />}\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}