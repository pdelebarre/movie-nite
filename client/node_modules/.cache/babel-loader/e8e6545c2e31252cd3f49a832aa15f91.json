{"ast":null,"code":"import _regeneratorRuntime from\"/Volumes/LaCie/Dev/myProjects/movie-nite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Volumes/LaCie/Dev/myProjects/movie-nite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Volumes/LaCie/Dev/myProjects/movie-nite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import*as RealmWeb from\"realm-web\";import React,{useContext,useState}from\"react\";import{REALM_APP_ID,MONGODB_API_KEY}from\"../store/keys\";import{jsx as _jsx}from\"react/jsx-runtime\";var RealmAppContext=/*#__PURE__*/React.createContext(null);var RealmApp=function RealmApp(_ref){var children=_ref.children;var app=new RealmWeb.App({id:REALM_APP_ID});var _useState=useState(null),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var loginApiKey=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var credentials;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:credentials=RealmWeb.Credentials.apiKey(MONGODB_API_KEY);_context.prev=1;_context.next=4;return app.logIn(credentials);case 4:setUser(app.currentUser);return _context.abrupt(\"return\",app.currentUser);case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);setUser(null);return _context.abrupt(\"return\",null);case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return function loginApiKey(){return _ref2.apply(this,arguments);};}();var logOut=function logOut(){if(user!==null){app.currentUser.logOut();setUser(null);}};return/*#__PURE__*/_jsx(RealmAppContext.Provider,{value:{loginApiKey:loginApiKey,logOut:logOut,user:user},children:children});};export var useRealmApp=function useRealmApp(){var realmContext=useContext(RealmAppContext);if(realmContext==null){throw new Error(\"useRealmApp() called outside of a RealmApp?\");}return realmContext;};export default RealmApp;","map":{"version":3,"sources":["/Volumes/LaCie/Dev/myProjects/movie-nite/src/store/realm.js"],"names":["RealmWeb","React","useContext","useState","REALM_APP_ID","MONGODB_API_KEY","RealmAppContext","createContext","RealmApp","children","app","App","id","user","setUser","loginApiKey","credentials","Credentials","apiKey","logIn","currentUser","logOut","useRealmApp","realmContext","Error"],"mappings":"0dAAA,MAAO,GAAKA,CAAAA,QAAZ,KAA0B,WAA1B,CAEA,MAAOC,CAAAA,KAAP,EAAgBC,UAAhB,CAA4BC,QAA5B,KAA4C,OAA5C,CAEA,OAASC,YAAT,CAAuBC,eAAvB,KAA8C,eAA9C,C,2CAEA,GAAMC,CAAAA,eAAe,cAAGL,KAAK,CAACM,aAAN,CAAoB,IAApB,CAAxB,CAEA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,MAAkB,IAAfC,CAAAA,QAAe,MAAfA,QAAe,CAG/B,GAAMC,CAAAA,GAAG,CAAG,GAAIV,CAAAA,QAAQ,CAACW,GAAb,CAAiB,CAAEC,EAAE,CAAER,YAAN,CAAjB,CAAZ,CACA,cAAwBD,QAAQ,CAAC,IAAD,CAAhC,wCAAOU,IAAP,eAAaC,OAAb,eAEA,GAAMC,CAAAA,WAAW,2FAAG,mJACVC,WADU,CACIhB,QAAQ,CAACiB,WAAT,CAAqBC,MAArB,CAA4Bb,eAA5B,CADJ,uCAGNK,CAAAA,GAAG,CAACS,KAAJ,CAAUH,WAAV,CAHM,QAIZF,OAAO,CAACJ,GAAG,CAACU,WAAL,CAAP,CAJY,gCAKLV,GAAG,CAACU,WALC,0DAOZN,OAAO,CAAC,IAAD,CAAP,CAPY,gCAQL,IARK,sEAAH,kBAAXC,CAAAA,WAAW,2CAAjB,CAYA,GAAMM,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACjB,GAAIR,IAAI,GAAK,IAAb,CAAmB,CACfH,GAAG,CAACU,WAAJ,CAAgBC,MAAhB,GACAP,OAAO,CAAC,IAAD,CAAP,CACH,CACJ,CALD,CAOA,mBACI,KAAC,eAAD,CAAiB,QAAjB,EACI,KAAK,CAAE,CACHC,WAAW,CAAXA,WADG,CAEHM,MAAM,CAANA,MAFG,CAGHR,IAAI,CAAJA,IAHG,CADX,UAOKJ,QAPL,EADJ,CAWH,CApCD,CAsCA,MAAO,IAAMa,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CAC7B,GAAMC,CAAAA,YAAY,CAAGrB,UAAU,CAACI,eAAD,CAA/B,CACA,GAAIiB,YAAY,EAAI,IAApB,CAA0B,CACtB,KAAM,IAAIC,CAAAA,KAAJ,CAAU,6CAAV,CAAN,CACH,CACD,MAAOD,CAAAA,YAAP,CACH,CANM,CAQP,cAAef,CAAAA,QAAf","sourcesContent":["import * as RealmWeb from \"realm-web\"\n\nimport React, { useContext, useState } from \"react\"\n\nimport { REALM_APP_ID, MONGODB_API_KEY } from \"../store/keys\";\n\nconst RealmAppContext = React.createContext(null)\n\nconst RealmApp = ({ children }) => {\n \n    \n    const app = new RealmWeb.App({ id: REALM_APP_ID })\n    const [user, setUser] = useState(null)\n\n    const loginApiKey = async () => {\n        const credentials = RealmWeb.Credentials.apiKey(MONGODB_API_KEY)\n        try {\n            await app.logIn(credentials)\n            setUser(app.currentUser)\n            return app.currentUser\n        } catch (e) {\n            setUser(null)\n            return null\n        }\n    }\n\n    const logOut = () => {\n        if (user !== null) {\n            app.currentUser.logOut()\n            setUser(null)\n        }\n    }\n\n    return (\n        <RealmAppContext.Provider\n            value={{\n                loginApiKey,\n                logOut,\n                user,\n            }}\n        >\n            {children}\n        </RealmAppContext.Provider>\n    )\n}\n\nexport const useRealmApp = () => {\n    const realmContext = useContext(RealmAppContext)\n    if (realmContext == null) {\n        throw new Error(\"useRealmApp() called outside of a RealmApp?\")\n    }\n    return realmContext\n}\n\nexport default RealmApp"]},"metadata":{},"sourceType":"module"}